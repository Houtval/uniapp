"use strict";const o=require("../../../common/vendor.js"),c=require("../../../mqtt/mqtt.js"),l={data(){return{lightSwitch:!1,lightBrightness:0,color:"#000000",timer:null}},onShow(){this.getStatus(),o.index.getStorage({key:"username",fail:function(){o.index.showToast({icon:"error",title:"未登录，请先登录"}),setTimeout(function(){o.index.reLaunch({url:"/pages/user/login/login"})},1e3)}}),o.index.getStorage({key:"userid",fail:function(){o.index.showToast({icon:"error",title:"未登录，请先登录"}),setTimeout(function(){o.index.reLaunch({url:"/pages/user/login/login"})},1e3)}})},onHide(){clearInterval(this.timer)},methods:{openColor:function(){this.$refs.pickerColor.open()},confirm:function(t){this.color=t.hex,console.log("confirm",t.hex),c.publish("/stm32","color:"+this.color)},changeSwitch:function(){c.publish("/stm32","lightswitch:"+this.lightSwitch)},changeLightBrightness:function(){c.publish("/stm32","lightbrightness:"+this.lightBrightness)},getStatus:function(){const t=this;t.timer=setInterval(function(){o.index.getStorage({key:"lightswitch",success:function(e){t.lightSwitch=e.data=="true"}}),o.index.getStorage({key:"lightbrightness",success:function(e){t.lightBrightness=e.data}}),o.index.getStorage({key:"color",success:function(e){t.color=e.data}})},1e3)}}};if(!Array){const t=o.resolveComponent("uv-col"),e=o.resolveComponent("uv-switch"),u=o.resolveComponent("uv-row"),r=o.resolveComponent("uv-slider"),s=o.resolveComponent("uv-button"),n=o.resolveComponent("uv-pick-color");(t+e+u+r+s+n)()}const h=()=>"../../../uni_modules/uv-row/components/uv-col/uv-col.js",a=()=>"../../../uni_modules/uv-switch/components/uv-switch/uv-switch.js",m=()=>"../../../uni_modules/uv-row/components/uv-row/uv-row.js",p=()=>"../../../uni_modules/uv-slider/components/uv-slider/uv-slider.js",g=()=>"../../../uni_modules/uv-button/components/uv-button/uv-button.js",_=()=>"../../../uni_modules/uv-pick-color/components/uv-pick-color/uv-pick-color.js";Math||(h+a+m+p+g+_)();function v(t,e,u,r,s,n){return{a:o.p({span:"3",offset:"1"}),b:o.o(n.changeSwitch),c:o.o(i=>s.lightSwitch=i),d:o.p({size:"30",modelValue:s.lightSwitch}),e:o.p({span:"8"}),f:o.p({customStyle:"margin-bottom: 10px"}),g:o.p({span:"3",offset:"1"}),h:o.o(n.changeLightBrightness),i:o.o(i=>s.lightBrightness=i),j:o.p({["block-size"]:"28",min:"0",max:"100",["block-color"]:"#1296db",showValue:!0,modelValue:s.lightBrightness}),k:o.p({span:"8"}),l:o.p({customStyle:"margin-bottom: 10px"}),m:o.p({span:"3",offset:"1"}),n:o.o(n.openColor),o:o.p({type:"primary",text:"打开颜色选择器"}),p:o.sr("pickerColor","b8606b76-12,b8606b76-10"),q:o.o(n.confirm),r:o.p({span:"4"}),s:o.t(s.color),t:o.p({span:"3",offset:"1"}),v:o.p({customStyle:"margin-bottom: 10px"})}}const f=o._export_sfc(l,[["render",v],["__scopeId","data-v-b8606b76"],["__file","D:/imformation/uni-app/stm32/pages/tabbar/light/light.vue"]]);wx.createPage(f);
