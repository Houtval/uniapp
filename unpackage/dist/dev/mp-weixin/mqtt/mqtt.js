"use strict";const e=require("../common/vendor.js"),a="wxs://192.168.10.10:8084/mqtt",r="admin",x="zhao@1226";let o=null;const s={clean:!1,connectTimeout:4e3,clientId:l(),username:r,password:x};function c(){o=e.mqtt.connect(a,s),o.on("connect",function(){console.log("连接成功")})}function u(){o.on("message",function(n,i){let t=i.toString().split(":");t[0]=="temperature"&&e.index.setStorage({key:"temperature",data:t[1]}),t[0]=="humidity"&&e.index.setStorage({key:"humidity",data:t[1]}),t[0]=="lightswitch"&&e.index.setStorage({key:"lightswitch",data:t[1]}),t[0]=="lightbrightness"&&e.index.setStorage({key:"lightbrightness",data:t[1]}),t[0]=="lightbrightness"&&e.index.setStorage({key:"lightbrightness",data:t[1]}),t[0]=="color"&&e.index.setStorage({key:"color",data:t[1]}),t[0]=="buzzer"&&e.index.setStorage({key:"buzzer",data:t[1]}),t[0]=="maxtemperature"&&e.index.setStorage({key:"maxtemperature",data:t[1]}),t[0]=="maxhumidity"&&e.index.setStorage({key:"maxhumidity",data:t[1]}),console.log(i.toString())})}function d(n,i){o.subscribe(n,function(t){t||o.publish(n,i)})}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=Math.random()*16|0,t=n=="x"?i:i&3|8;return t.toString(16)})}exports.init=c;exports.publish=d;exports.reception=u;
